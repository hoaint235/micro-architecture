name: $(BuildID)

variables:
  - name: sourceFolder
    value: /source/front-end/back-office/bootstrap-container
  - name: sourceWorkspace
    value: $(Pipeline.Workspace)/s/$(sourceFolder)/

trigger:
  branches:
    include:
      - master
      - feature/*
  paths:
    include:
      - "$(sourceFolder)/*"
pr:
  - master

pool:
  vmImage: "ubuntu-latest"

stages:
  - stage: Build
    jobs:
      - job: BuildJob
        displayName: BuildJob
        steps:
          - task: NodeTool@0
            inputs:
              versionSpec: "14.x"
            displayName: "Install Node.js"
          - script: npm install -g yarn
          - script: yarn install
            name: YarnInstall
            displayName: Yarn install
            workingDirectory: $(sourceWorkspace)
          - script: yarn format && yarn check-format
            name: YarnFormat
            displayName: Yarn format
            workingDirectory: $(sourceWorkspace)
          - script: yarn lint
            name: YarnLint
            displayName: Yarn lint
            workingDirectory: $(sourceWorkspace)
          - script: yarn build
            name: YarnBuild
            displayName: Yarn build
            workingDirectory: $(sourceWorkspace)
